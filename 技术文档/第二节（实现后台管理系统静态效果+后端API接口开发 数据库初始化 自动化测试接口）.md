第二节（实现后台管理系统静态效果+后端API接口开发 数据库初始化 自动化测试接口）
技术要点
- 实现后台管理系统静态效果
- 后端API接口开发
- 数据库初始化
- 自动化测试接口
提示词相关
（后台管理平台第一次使用的提示词）
- 我现在需要对当前项目进行二次开发
- 你先从后台管理系统开发规范.md文件夹下面的菜单进行添加开发
- 要区分一级菜单和二级菜单，每个页面搜索区/列表区/列表操作/新增/编辑表单/删除/审核等 都要和开发文档一致
- 先实现静态功能，数据直接使用页面静态假数据就可以了
- 优先使用components底下的组件，然后再次选element-plus组件 
- 需要根据当前代码风格进行二次开发，有重复组件就用重复组件，不要使用任何emoji图标
- 可以根据系统管理下角色管理和用户管理代码风格来实现我们的新模块
- 图标库先查有没有这个图标，有的话就用 没有的话就找个详细的替换 这个项目是有封装好图标的
- 所有的工具类和公共方法都在utils文件夹里面
（后端API接口开发提示词）
- 需要根据当前代码风格进行二次开发，有重复组件就用重复组件，不要使用任何emoji图标
- 合理的使用utils下面封装好的工具类
- 需要初始化数据库，数据表设计可以看根目录下面的docs目录下的数据表设计，严格按照这个来进行设计
- 结合initDB和initDbData这两个初始化的文件，数据库已经建好了 只要建立数据表就可以了
- 所有的请求字段和响应字段返回必须为驼峰命名
- 所有的表和字段都需要加上中文注释
- 密码类的加密方式使用md5就可以了
- 所有的字段都需要严格的按照docs目录下的表设计进行设计
- 所有的接口都需要严格的按照docs目录下的api接口设计
- 不要有任何自己的假象和虚构 按照文档提供的来进行开发
- 需要实现完整的代码和接口功能，不要遗漏任何一个接口
- 写完一个模块需要在docs下面创建接口文档 c端的就放到c-api文件夹 b端的就放到b-api文件夹，命名方式为xxxapi文档.md
- 需要在.env和config里面配置数据库信息以及七牛云信息等，默认信息也需要一并修改

# 数据库信息
数据库名：填写你自己的
数据库账号：填写你自己的
数据库密码：填写你自己的
mysql 5.7

# 图片云存储
七牛云配置
AK：填写你自己的
SK：填写你自己的
测试域名：填写你自己的
空间名称：填写你自己的

## 开发规范

- 遵循现有项目的分层架构（路由层 → 控制器层 → 服务层 → 数据访问层 → 数据库）
- 使用项目已有的工具类：utils/bcrypt.js（密码加密）、utils/db.js（数据库操作）、utils/jwt.js（令牌管理）、utils/logger.js（日志记录）、utils/response.js（统一响应格式）
- 所有请求字段和响应字段必须使用驼峰命名（camelCase）
- 所有数据表和字段都需要添加中文注释
- 密码加密使用MD5算法（需要添加md5依赖包）
- 严格按照docs目录下的数据表设计和API接口设计进行开发
- 不要使用任何emoji图标
- 所有接口响应必须使用统一的响应格式（code、message、data）
- 分页响应格式：data中包含list、total、page、pageSize字段
- 数据库连接信息已配置在config/index.js中，使用新的数据库：mcnzhanghao_20251118

## 任务

1. 更新.env和config/index.js配置文件
   - 添加七牛云配置（AK、SK、测试域名、空间名称）
   - 更新数据库配置为新数据库信息

2. 创建数据库初始化脚本（scripts/db/目录）
   - 创建users表（用户表）
   - 创建products表（商品表）
   - 创建orders表（订单表）
   - 创建product_images表（商品图片表）
   - 创建announcements表（公告表）
   - 创建admins表（管理员表）
   - 创建operation_logs表（操作日志表）

3. 更新utils/bcrypt.js为MD5加密方式

4. 实现C端（用户端）API接口
   - 用户认证模块（注册、登录、退出登录）
   - 商品列表和详情接口
   - 订单创建、列表、详情接口
   - 支付相关接口（生成支付链接、支付回调）
   - 用户信息接口（获取、更新）

5. 实现B端（管理端）API接口
   - 管理员认证模块（登录、退出登录）
   - 仪表板数据统计接口
   - 用户管理接口（列表、详情、编辑、禁用/启用、删除）
   - 商品管理接口（列表、详情、创建、编辑、上架/下架、删除）
   - 订单管理接口（列表、详情、修改状态、手动发放、取消、删除、导出）
   - 财务统计接口
   - 公告管理接口（列表、创建、编辑、删除）
   - 系统设置接口（支付设置）
   - 管理员账号管理接口
   - 操作日志接口

6. 完成后在docs目录下创建接口文档
   - C端接口文档放在docs/c-api/文件夹，命名为xxxapi文档.md
   - B端接口文档放在docs/b-api/文件夹，命名为xxxapi文档.md

## 注意事项

- 严格按照docs目录下的表设计进行字段设计，不要遗漏任何字段
- 所有接口都需要实现完整功能，不要遗漏任何一个接口
- 商品卡号需要支持自动分割（账号----密码----手机号/邮箱/空）
- 订单支持免登录下单和已登录下单两种方式
- 管理员操作需要记录到operation_logs表
- 所有敏感操作需要权限验证
- 使用项目已有的response.js统一响应格式
- 数据库使用MySQL 5.7，确保兼容性

---
现在请立即开始按照上述规范和任务进行开发。

# 数据库信息
数据库名：填写你自己的
数据库账号：填写你自己的
数据库密码：填写你自己的
mysql 5.7

# 图片云存储
七牛云配置
AK：填写你自己的
SK：填写你自己的
测试域名：填写你自己的
空间名称：填写你自己的
（自动化测试脚本提示词）
## 开发规范
- 使用 Node.js + axios 编写接口测试脚本
- 严格按照 docs/b-api 和 docs/c-api 目录下的API文档编写测试
- 所有字段名称、接口路径、请求参数必须与文档完全一致
- 不添加任何文档中未定义的接口或字段
- 测试脚本要简洁实用，本地测试环境即可
- 使用彩色日志输出测试结果，便于查看
- 单个命令执行所有测试用例
- 所有的测试脚本都放到tests目录下
## 开发规范

- 使用 Node.js + axios 编写接口测试脚本
- 严格按照 docs/b-api 和 docs/c-api 目录下的API文档编写测试
- 所有字段名称、接口路径、请求参数必须与文档完全一致（使用驼峰命名）
- 不添加任何文档中未定义的接口或字段
- 使用彩色日志输出测试结果（chalk库），便于查看成功/失败状态
- 测试脚本要简洁实用，适合本地测试环境
- 所有测试脚本放在 tests 目录下
- 单个命令执行所有测试用例
- 需要每个接口保证都是正常的

## 任务

1. 安装测试依赖
   - axios（HTTP请求）
   - chalk（彩色日志输出）
   - 在 package.json 中添加测试命令：`"test": "node tests/index.js"`

2. 创建测试目录结构
   - tests/index.js（测试入口，执行所有测试）
   - tests/c-api/（C端接口测试）
   - tests/b-api/（B端接口测试）
   - tests/utils/（测试工具函数：HTTP请求封装、日志输出等）

3. 实现测试工具函数
   - HTTP请求封装（支持自动添加token）
   - 彩色日志输出（成功绿色、失败红色、警告黄色）
   - 测试结果统计（总数、成功数、失败数）

4. 编写C端接口测试（严格按照 docs/c-api 文档）
   - 用户认证测试（注册、登录、退出登录）
   - 商品接口测试（列表、详情）
   - 订单接口测试（创建、列表、详情）
   - 支付接口测试（生成支付链接）
   - 用户信息测试（获取、更新）

5. 编写B端接口测试（严格按照 docs/b-api 文档）
   - 管理员认证测试（登录、退出登录）
   - 仪表板测试（数据概览）
   - 用户管理测试（列表、详情、编辑、禁用/启用、删除）
   - 商品管理测试（列表、详情、创建、编辑、上架/下架、删除）
   - 订单管理测试（列表、详情、修改状态、手动发放、取消、删除）
   - 财务管理测试（销售统计）
   - 公告管理测试（列表、创建、编辑、删除）
   - 管理员账号管理测试（列表、创建、编辑、重置密码、删除）
   - 操作日志测试（列表）

6. 实现测试流程控制
   - 按顺序执行测试（先C端后B端）
   - 测试失败时继续执行后续测试
   - 最后输出完整的测试报告

## 注意事项
- 测试服务器地址默认为 http://localhost:3000
- 测试数据使用文档中的示例数据
- 需要token的接口要先执行登录获取token
- 测试用户：C端使用注册的测试用户，B端使用 admin/admin123
- 所有字段必须使用驼峰命名（camelCase）
- 响应格式验证：检查 code、message、data 字段
- 分页接口验证：检查 list、total、page、pageSize 字段
- 测试过程中创建的数据可以在测试结束后清理（可选）
- 输出测试日志要清晰，包含：接口路径、请求参数、响应状态、耗时

---
现在请立即开始按照上述规范和任务进行开发。
（其他的一些没整理的 看看就行了）
需要检查一下失败的接口和跳过的接口 
成功率至少要达到90%以上，一切接口以docs目录下的api接口设计和数据表设计来进行修改，
如果碰到api接口设计有的接口 但是在代码没有的接口 那就要在代码内进行补充 

检查一下测试脚本和docs目录下的b-api和c-api的字段是否一致 如果不一致 把docs目录的b-api和c-api进行修改一下  我准备发给前端对接了
