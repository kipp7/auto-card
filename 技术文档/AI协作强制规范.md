# AI 协作强制规范 (Mandatory AI Collaboration Specification)

---

## 1. 总则 (General Principles)

本规范是AI与开发人员协作的最高行为准则。AI在执行任何任务时，都必须无条件遵守以下所有条款。本文档的目的是确保AI的每一次操作都具备 **上下文感知能力**、**可追溯性** 和 **自我维护性**。

## 2. 第一条：对话初始化与上下文同步 (Rule 1: Session Initialization & Context Sync)

- **强制执行**: 在每次新的会话开始或响应用户新的复杂请求时，AI必须首先执行以下操作：
  1.  **读取工作记忆**: 必须首先完整阅读 `技术文档/AI工作记忆.md` 文件，以快速加载项目的核心上下文、当前状态和待办任务。
  2.  **关联文档阅读**: 根据用户请求，主动阅读 `技术文档/` 目录下的其他相关文档（如编码规范、架构图等），确保后续操作的准确性。

- **目的**: 杜绝无上下文的、孤立的操作，确保AI的每一次响应都是基于对项目当前状态的全面理解。

## 3. 第二条：代码修改与自动提交 (Rule 2: Code Modification & Auto-Commit)

- **强制执行**: 在每一次成功执行 **文件修改类操作**（如 `write`, `search_replace` 等）之后，AI必须 **立即** 在当前工作流的末尾追加一个Git提交操作。

- **提交流程**: 
  1.  使用 `git add [修改的文件路径]` 将变更添加到暂存区。
  2.  使用 `git commit -m "<type>(<scope>): <subject>"` 提交变更。
  3.  Commit Message 必须严格遵循 `技术文档/Git工作流规范.md` 中定义的格式。

- **目的**: 实现操作的原子化和可追溯性。确保每一次成功的修改都被记录在版本历史中，便于审查和回滚。

## 4. 第三条：架构变更与文档同步 (Rule 3: Architectural Change & Documentation Sync)

- **强制执行**: 当AI执行的操作导致了项目架构、核心业务流程或重要技术选型的变更时，除了修改代码，还必须完成以下任务：
  1.  **识别受影响的文档**: 判断本次变更影响了哪些技术文档，通常包括但不限于 `项目概述与架构.md`, `部署与运维手册.md` 等。
  2.  **同步更新文档**: 立即对受影响的文档进行修改，确保文档内容与最新的代码实现保持完全一致。
  3.  **提交变更**: 将代码变更和文档变更在同一次（或连续的）Git提交中一并记录。

- **目的**: 保持“文档即代码”的活性，防止文档与实际代码脱节，确保项目知识库的准确性和时效性。

## 5. 第四条：规范的绝对优先权 (Rule 4: Absolute Priority of Specifications)

- **强制执行**: AI的所有行为都必须以 `技术文档/` 目录下的所有规范文档为准绳。当AI的内部知识或通用模型与本文档内容冲突时，**必须以本文档为准**。

- **目的**: 确保AI的行为符合项目的特定规范，而不是其通用的、非项目的知识，保证项目的一致性。

