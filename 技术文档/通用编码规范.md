# 通用编码规范 (General Coding Convention)

---

## 1. 概述 (Overview)

本规范旨在为项目的所有代码（包括前端和后端）提供一套统一的编码标准。遵循这些规范有助于提高代码的可读性、可维护性，并促进团队成员之间的顺畅协作。

## 2. 命名规范 (Naming Convention)

### 2.1. 通用规则

- **驼峰命名法 (CamelCase)**: 变量、函数、对象属性、常量等应优先使用驼峰命名法。
  - **小驼峰 (lowerCamelCase)**: 用于变量、函数名、对象属性。例如: `userName`, `calculatePrice`, `orderDetail`。
  - **大驼峰 (UpperCamelCase)**: 用于类名、构造函数、组件名。例如: `class User`, `function Order()`, `ProductCard.vue`。

- **常量 (Constants)**: 应使用全大写字母和下划线。例如: `const MAX_LOGIN_ATTEMPTS = 5;`

### 2.2. 文件与目录命名

- **目录**: 使用小写字母，多个单词之间用短横线 `-` 分隔。例如: `user-management`, `api-services`。
- **组件文件 (Vue)**: 使用大驼峰命名法。例如: `UserProfile.vue`, `DataTable.vue`。
- **其他代码文件 (JS/TS)**: 使用小驼峰命名法。例如: `authService.ts`, `validationUtils.js`。

### 2.3. API 接口命名

- **URL路径**: 使用小写字母和短横线 `-`。RESTful风格的资源路径应使用复数形式。例如: `/api/b/users`, `/api/c/product-categories`。
- **请求/响应字段**: 严格使用小驼峰命名法。例如: `pageSize`, `orderAmount`。

## 3. 代码注释 (Code Comments)

注释的目的是解释代码的“为什么”而不是“做什么”。

- **函数/方法注释**: 所有公共函数或复杂函数都必须有注释，说明其功能、参数和返回值。
  ```javascript
  /**
   * 计算订单的总金额
   * @param {Array<Object>} items - 订单中的商品项数组
   * @param {number} discount - 折扣率 (例如: 0.8)
   * @returns {number} - 计算后的总金额
   */
  function calculateTotalPrice(items, discount) {
    // ...
  }
  ```

- **复杂逻辑注释**: 对于复杂的算法、正则表达式或业务逻辑，应在代码上方添加注释说明。
  ```javascript
  // 使用正则表达式验证手机号格式
  const phoneRegex = /^1[3-9]\d{9}$/;
  ```

## 4. 格式化与风格 (Formatting & Style)

- **缩进**: 使用 **2个空格** 进行缩进，而不是Tab。
- **分号**: 所有JavaScript/TypeScript语句结尾都必须使用分号 `;`。
- **引号**: 优先使用 **单引号 `'`**，除非字符串内部包含单引号。
- **空格**: 在操作符（`+`, `-`, `*`, `/`, `=`）前后、逗号后、以及 `if/for/while` 等关键字后添加空格。
- **最大行长**: 一行代码的长度不应超过 **120个字符**。

## 5. API 错误处理 (API Error Handling)

为了方便前后端联调和统一处理错误，所有API响应都应遵循统一的错误码结构。

- **成功响应**: 
  ```json
  { "code": 0, "message": "success", "data": { ... } }
  ```

- **失败响应**: 
  ```json
  { "code": [错误码], "message": "[错误信息]", "data": null }
  ```

- **通用错误码建议**:
  - `400`: 客户端请求错误 (参数无效等)
  - `401`: 未授权 (未登录或Token无效)
  - `403`: 禁止访问 (权限不足)
  - `404`: 资源未找到
  - `500`: 服务器内部错误
  - `1001+`: 自定义业务错误码 (例如: `1001` - 用户名已存在)

